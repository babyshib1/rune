import{ak as a,u as t,c as e,r as l,w as i,f as n,a as s,k as u,b as r,d as o,E as d,K as c,o as p,v,x as m,y as h}from"./vendor-2ecfd57a.js";import{_ as y,l as f}from"./index-781d10dd.js";const k=a=>(v("data-v-0e8a77da"),a=a(),m(),a),b={class:"etchCon"},w={class:"etchMiddle mw"},x={class:"horizontal"},g=[k((()=>r("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},[r("path",{d:"M723.781818 986.414545c-11.915636 0-23.831273-4.538182-32.907636-13.637818L263.005091 544.907636c-18.176-18.176-18.176-47.639273 0-65.815272L690.874182 51.223273c18.176-18.176 47.639273-18.176 65.838545 0 18.176 18.176 18.176 47.639273 0 65.815272L361.751273 512l394.961454 394.961455c18.176 18.176 18.176 47.639273 0 65.838545-9.099636 9.076364-21.015273 13.614545-32.930909 13.614545z",fill:"#ffffff"})],-1))),k((()=>r("p",null,"Mint",-1)))],T={class:"inputList"},M=k((()=>r("span",null,"Tick",-1))),_=["value"],L=k((()=>r("span",null,"Type",-1))),N=["value"],q=k((()=>r("span",null,"Lim",-1))),C=["value"],j=k((()=>r("span",null,"Tick Max",-1))),$=["value"];var I=y({__name:"Deploymint",setup(v){const m=a(),y=t(),{proxy:k}=h(),I=e((()=>y.state.wallet.address)),S={address:"Please connect the wallet",limitTotalSupply:"The total supply quantity must be greater than the limit quantity",limitScaleTotal:"The total supply quantity must be an integral multiple of the limit quantity",notId:"No corresponding data was found, please try again later.",overMaxCount:"The current tick has been minted.",tickOverMaxCount:"The current tick has been minted.",tickId:"Please input the tick id"},z=f();const B=l({});async function H(){var a;if(null==(a=m.query)?void 0:a.project_id){let a=await z(m.query.project_id);B.value=(null==a?void 0:a.data)||{}}else B.value={}}async function O(){var a;await H();let t=function(a=[]){let t="";return a.some((a=>{if(a[0])return t=S[a[1]]||"input empty data",!0})),t}([[!I.value,"address"],[!(null==(a=B.value)?void 0:a.project_id),"notId"],[!(Number(B.value.max)>Number(B.value.mint_lim)),"overMaxCount"]]);if(t)return d.warning(t),!1;let e=c.service({text:"Mint send transition....",lock:!0,background:"rgba(0,0,0,0.5)"}),l=k.$web3.utils.utf8ToHex("data:,"+JSON.stringify({p:B.value.p,op:"mint",tick:B.value.tick,amt:String(B.value.lim)})),i=await k.$sendTransition(I.value,l);i.status?(await k.$statusByHash(i.hash),await k.$Utils.sleep(8e3),d.success("Mint transition send success")):d.error(i.msg||"Mint transition send fail"),e.close()}return H(),i(m,(()=>{H()})),(a,t)=>{const e=n("page-header");return p(),s("div",b,[u(e),r("div",w,[r("div",x,[r("div",{class:"backRow",onClick:t[0]||(t[0]=t=>a.$router.go(-1))},g),r("div",T,[r("p",null,[M,r("input",{disabled:"",placeholder:"Tick Name",value:B.value.tick,type:"text"},null,8,_)]),r("p",null,[L,r("input",{disabled:"",placeholder:"Tick Type",value:B.value.p,type:"text"},null,8,N)]),r("p",null,[q,r("input",{disabled:"",placeholder:"Tick Lim",value:B.value.lim,type:"text"},null,8,C)]),r("p",null,[j,r("input",{disabled:"",placeholder:"Tick Lim",value:B.value.max,type:"text"},null,8,$)]),r("button",{class:"buy",style:o({opacity:Number(B.value.max)>Number(B.value.mint_lim)?"1":"0.2"}),onClick:O}," Mint ",4)])])])])}}},[["__scopeId","data-v-0e8a77da"]]);export{I as default};
