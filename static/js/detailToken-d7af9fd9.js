import{y as t,z as e,ak as l,u as a,c as i,w as s,r,f as n,a as o,k as u,b as c,i as d,p,j as v,t as g,d as m,B as f,C as h,F as w,l as y,aj as b,h as _,o as $,g as x,an as k,v as B,x as N,E as U,K as S,s as C}from"./vendor-c73ab416.js";import{_ as j,a as M,b as z}from"./order_icon-67b197c7.js";import{_ as T,i as L,j as V,e as F,C as H,f as I,g as P}from"./index-e45f1146.js";import{_ as D}from"./holder_icon-ddd4ff81.js";import{_ as E}from"./link_icon-99751368.js";const Z=t=>(B("data-v-6fc5943f"),t=t(),N(),t),W={class:"etchCon"},A={class:"etchMiddle mw"},q=[Z((()=>c("path",{d:"M723.781818 986.414545c-11.915636 0-23.831273-4.538182-32.907636-13.637818L263.005091 544.907636c-18.176-18.176-18.176-47.639273 0-65.815272L690.874182 51.223273c18.176-18.176 47.639273-18.176 65.838545 0 18.176 18.176 18.176 47.639273 0 65.815272L361.751273 512l394.961454 394.961455c18.176 18.176 18.176 47.639273 0 65.838545-9.099636 9.076364-21.015273 13.614545-32.930909 13.614545z",fill:"#ffffff"},null,-1)))],K=Z((()=>c("p",null,"Token / Detail",-1))),O={class:"etchTitle mw"},R={class:"disLeft"},X={style:{display:"flex","align-items":"center"}},G={key:0,style:{width:"50px","margin-left":"-20px"},src:"./static/assets/icon_market-a020a049.png",alt:""},J={style:{flex:"1"}},Q=["src"],Y={class:"disType"},tt=Z((()=>c("span",null,[c("img",{style:{width:"20px","margin-right":"8px"},src:j,alt:""}),v("Floor Price")],-1))),et=Z((()=>c("span",null,[c("img",{style:{width:"20px","margin-right":"8px"},src:M,alt:""}),v("Market Cap")],-1))),lt=Z((()=>c("span",null,[c("img",{style:{width:"20px","margin-right":"8px"},src:I,alt:""}),v("Total Vol")],-1))),at=Z((()=>c("span",null,[c("img",{style:{width:"20px","margin-right":"8px"},src:D,alt:""}),v("Holders")],-1))),it=Z((()=>c("span",null,[c("img",{style:{width:"20px","margin-right":"8px"},src:z,alt:""}),v("Listed")],-1))),st=Z((()=>c("span",null,[c("img",{style:{width:"20px","margin-right":"8px"},src:"./static/assets/total_icon-2f290af1.png",alt:""}),v("Total Supply")],-1))),rt={class:"sort_type"},nt=[Z((()=>c("path",{d:"M768 362.666667a21.333333 21.333333 0 0 1 21.333333 21.333333v387.648l61.418667-61.397333a21.333333 21.333333 0 0 1 30.165333 0l30.165334 30.165333a21.333333 21.333333 0 0 1 0 30.165333l-116.053334 116.053334a53.333333 53.333333 0 0 1-90.922666-34.218667L704 848.917333V384a21.333333 21.333333 0 0 1 21.333333-21.333333h42.666667zM554.666667 789.333333a21.333333 21.333333 0 0 1 21.333333 21.333334v42.666666a21.333333 21.333333 0 0 1-21.333333 21.333334H128a21.333333 21.333333 0 0 1-21.333333-21.333334v-42.666666a21.333333 21.333333 0 0 1 21.333333-21.333334h426.666667z m0-320a21.333333 21.333333 0 0 1 21.333333 21.333334v42.666666a21.333333 21.333333 0 0 1-21.333333 21.333334H128a21.333333 21.333333 0 0 1-21.333333-21.333334v-42.666666a21.333333 21.333333 0 0 1 21.333333-21.333334h426.666667zM896 149.333333a21.333333 21.333333 0 0 1 21.333333 21.333334v42.666666a21.333333 21.333333 0 0 1-21.333333 21.333334H128a21.333333 21.333333 0 0 1-21.333333-21.333334V170.666667a21.333333 21.333333 0 0 1 21.333333-21.333334h768z",fill:"#ffc107"},null,-1)))],ot=[Z((()=>c("path",{d:"M768 362.666667a21.333333 21.333333 0 0 1 21.333333 21.333333v387.648l61.418667-61.397333a21.333333 21.333333 0 0 1 30.165333 0l30.165334 30.165333a21.333333 21.333333 0 0 1 0 30.165333l-116.053334 116.053334a53.333333 53.333333 0 0 1-90.922666-34.218667L704 848.917333V384a21.333333 21.333333 0 0 1 21.333333-21.333333h42.666667zM554.666667 789.333333a21.333333 21.333333 0 0 1 21.333333 21.333334v42.666666a21.333333 21.333333 0 0 1-21.333333 21.333334H128a21.333333 21.333333 0 0 1-21.333333-21.333334v-42.666666a21.333333 21.333333 0 0 1 21.333333-21.333334h426.666667z m0-320a21.333333 21.333333 0 0 1 21.333333 21.333334v42.666666a21.333333 21.333333 0 0 1-21.333333 21.333334H128a21.333333 21.333333 0 0 1-21.333333-21.333334v-42.666666a21.333333 21.333333 0 0 1 21.333333-21.333334h426.666667zM896 149.333333a21.333333 21.333333 0 0 1 21.333333 21.333334v42.666666a21.333333 21.333333 0 0 1-21.333333 21.333334H128a21.333333 21.333333 0 0 1-21.333333-21.333334V170.666667a21.333333 21.333333 0 0 1 21.333333-21.333334h768z",fill:"#ffc107"},null,-1)))],ut={class:"mw"},ct={class:"table"},dt={class:"img"},pt=["src"],vt={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none"},gt=[C('<g clip-path="url(#swoosh-icon-green_svg__a)" opacity="0.65" data-v-6fc5943f><path fill="#4EFCC7" d="M8 14.667A6.667 6.667 0 1 0 8 1.334a6.667 6.667 0 0 0 0 13.333ZM8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16Z" data-v-6fc5943f></path><path stroke="#4EFCC7" stroke-width="1.3" d="m5 8 2.5 2.5L12 6" data-v-6fc5943f></path></g><defs data-v-6fc5943f><clipPath id="swoosh-icon-green_svg__a" data-v-6fc5943f><path fill="#4EFCC7" d="M0 0h16v16H0z" data-v-6fc5943f></path></clipPath></defs>',2)],mt={class:"typeList"},ft={class:"priceType"},ht={class:"bsc_price"},wt={class:"bsc_price",style:{"font-size":"15px",color:"#999"}},yt={class:"lianEtch"},bt={style:{display:"flex","align-items":"center"}},_t=Z((()=>c("img",{style:{width:"20px","margin-right":"8px"},src:I,alt:""},null,-1))),$t={class:"lianEtch"},xt=["href"],kt=Z((()=>c("img",{style:{width:"14px","margin-left":"4px"},src:E,alt:""},null,-1))),Bt={class:"btl_list"},Nt=["onClick"],Ut={class:"pageNum"},St={class:"MuiPagination-ul"},Ct={class:"header"},jt={class:"tick"},Mt={class:"p"},zt={class:"main"},Tt={class:"erc20"},Lt={class:"top"},Vt={class:"tick"},Ft=["src"],Ht={class:"tag"},It={class:"num"},Pt=Z((()=>c("div",{class:"bottom"},null,-1))),Dt={class:"inp"},Et={class:"row"},Zt=Z((()=>c("div",{class:"col"},"Price",-1))),Wt={class:"col"},At={class:"row"},qt=Z((()=>c("div",{class:"col"},"Total Pay",-1))),Kt={class:"col"},Ot={class:"footer"};var Rt=T({__name:"detailToken",setup(B){const N=t().proxy,C=e(),j=l().query.project_id||"",M=a(),z=i((()=>M.state.wallet.address)),T=i((()=>M.state.wallet.ticks));function I(){C.push({name:"Marketplace"})}const D=L(j);s(D,(()=>{var t;(null==(t=D.value)?void 0:t.project_id)||I()}));const{total:E,size:Z,page:Rt,list:Xt,sort:Gt,getData:Jt}=V(j,20),Qt=P(),Yt=r(!1),te=r({}),ee=F(),le=r(""),ae=i((()=>{var t;let e=0;return(null==(t=te.value)?void 0:t.order_id)&&(e=Number(te.value.order_amt||0)-Number(te.value.buy_lim||0)),e}));function ie(t){let e=new N.$web3.utils.BN(String(t||"0")),l=new N.$web3.utils.BN(String(le.value||"0"));return N.$web3.utils.fromWei(e.mul(l).toString())}function se(t){let e=new N.$web3.utils.BN(String(t||"0"));return N.$web3.utils.fromWei(e.toString())}s(le,(()=>le.value=String(le.value||"").replace(/^0|\D/g,"")));const re=i((()=>M.state.wallet.bnbToUsdt));function ne(t){let e=new N.$web3.utils.BN(String(t||"0")),l=new N.$web3.utils.BN(String(re.value||"0"));return(Number(N.$web3.utils.fromWei(e.mul(l).toString()))/1e8).toFixed(4)}function oe(t,e){let l=new N.$web3.utils.BN(String(e||"0")),a=new N.$web3.utils.BN(String(re.value||"0")),i=new N.$web3.utils.BN(String(t||"0"));return(Number(N.$web3.utils.fromWei(l.mul(a).mul(i).toString()))/1e8).toFixed(2)}function ue(t,e){let l=new N.$web3.utils.BN(String(e||"0")),a=new N.$web3.utils.BN(String(t||"0"));return N.$web3.utils.fromWei(l.mul(a).toString())}function ce(t){let e=N.$web3.utils.BN(N.$web3.utils.hexToNumberString("0x"+Number(t||0).toString(16))),l=N.$web3.utils.BN(M.state.wallet.bnbToUsdt);return(Number(e.mul(l).toString())/1e26).toFixed(4)}function de(t){let e=N.$web3.utils.BN(String(t||"0")),l=N.$web3.utils.BN(M.state.wallet.bnbToUsdt);return(Number(e.mul(l).toString())/1e26).toFixed(4)}return(t,e)=>{const l=n("page-header"),a=n("el-tooltip"),i=n("el-pagination"),s=n("van-icon"),r=n("el-tag"),B=n("el-input"),j=n("el-button"),L=n("el-dialog");return $(),o("div",W,[u(l),c("div",A,[($(),o("svg",{onClick:I,viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},q)),K]),c("div",O,[c("div",R,[c("p",X,[t.$Utils.getIsOne(d(D).project_id)?($(),o("img",G)):p("",!0),v(" "+g(d(D).p)+" "+g(d(D).tick),1)]),c("div",J,[t.$Utils.getSrcById(d(D).project_id)?($(),o("img",{key:0,src:t.$Utils.getSrcById(d(D).project_id),style:{width:"20px",height:"20px"}},null,8,Q)):p("",!0)]),c("div",{style:m({opacity:d(M).state.wallet.address?1:.5}),onClick:e[0]||(e[0]=t=>d(M).state.wallet.address&&d(C).push({name:"MyEthscriptions",query:{project_id:d(D).project_id}})),class:"disRight"},"My Bscscriptions ",4)]),c("div",Y,[c("p",null,[tt,c("span",null,"$"+g(t.$Utils.splitNum(t.$Utils.rpZero(de(d(D).floor_price))||"0")),1)]),c("p",null,[et,c("span",null,"$"+g(t.$Utils.splitNum(t.$Utils.rpZero(ce(d(D).market_cap)))),1)]),c("p",null,[lt,c("span",null,g(t.$Utils.splitNum(t.$Utils.rpZero((V=d(D).totalValue,N.$web3.utils.fromWei(String(V||"0"))||"0"))))+"BNB",1)]),c("p",null,[at,c("span",null,g(t.$Utils.splitNum(d(D).holderAmount||0)),1)]),c("p",null,[it,c("span",null,g(t.$Utils.splitNum(d(E)||0)),1)]),c("p",null,[st,c("span",null,g(t.$Utils.splitNum(d(D).max||0)),1)]),c("div",rt,[f(($(),o("svg",{onClick:e[1]||(e[1]=t=>Gt.value=-1),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40"},nt,512)),[[h,1===d(Gt)]]),f(($(),o("svg",{style:{transform:"rotateX(180deg)"},onClick:e[2]||(e[2]=t=>Gt.value=1),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40"},ot,512)),[[h,-1===d(Gt)]])])])]),c("div",ut,[c("div",ct,[($(!0),o(w,null,y(d(Xt),((e,l)=>($(),o("div",{class:"tableList",key:l},[c("div",dt,[c("p",null,g(e.tick),1),t.$Utils.getSrcById(e.project_id)?($(),o("img",{key:0,src:t.$Utils.getSrcById(e.project_id),style:{width:"20px",height:"20px"}},null,8,pt)):($(),o("svg",vt,gt))]),c("div",mt,[c("p",null,g(e.p),1),c("p",null,g((e.op||"Mint").toLowerCase()),1)]),c("div",ft,[c("p",null,g(t.$Utils.orderDiv(e.order_amt,e.buy_lim)),1),c("div",ht,g(t.$Utils.rpZero(se(e.price)))+" BNB / "+g(e.tick),1),c("div",wt,"â‰ˆ $"+g(ne(e.price)),1)]),c("div",yt,[c("p",bt,[_t,v(" "+g(t.$Utils.rpZero(ue(t.$Utils.orderDiv(e.order_amt,e.buy_lim),e.price))||"0"),1)]),c("p",null,g(t.$Utils.formatAddress(e.seller)),1)]),c("div",$t,[c("p",null,"$"+g(oe(t.$Utils.orderDiv(e.order_amt,e.buy_lim),e.price)),1),c("p",null,[u(a,{placement:"top",content:e.order_id},{default:_((()=>[c("a",{target:"_blank",href:t.$Config.browser+"/tx/"+e.hash,style:{display:"flex","align-items":"center",color:"#ffffff"}},[v("#"+g(e.blockNumber)+" ",1),kt],8,xt)])),_:2},1032,["content"])])]),c("div",Bt,[c("div",{class:"buy",onClick:t=>{var l;(l=e).order_id&&(te.value=l,Yt.value=!0)}},"Buy",8,Nt),u(H,{active:!!T.value[e.order_id],onClick:t=>d(M).commit("wallet/changeTicks",e.order_id)},null,8,["active","onClick"])])])))),128)),c("div",Ut,[c("div",St,[u(i,{background:"","hide-on-single-page":"","page-size":d(Z),"current-page":d(Rt),"onUpdate:currentPage":e[3]||(e[3]=t=>b(Rt)?Rt.value=t:null),layout:"prev, pager, next",total:d(E)},null,8,["page-size","current-page","total"])])])])]),u(L,{class:"buyDialog",modelValue:Yt.value,"onUpdate:modelValue":e[8]||(e[8]=t=>Yt.value=t),width:"400px","close-on-click-modal":!1},{header:_((()=>[c("div",Ct,[v("Buy "),c("span",jt,g(te.value.tick),1),v(),c("span",Mt,g(te.value.p),1),v(" for buy ")])])),footer:_((()=>[c("div",Ot,[u(j,{class:"btn_cancel",onClick:e[6]||(e[6]=t=>Yt.value=!1)},{default:_((()=>[v("Cancel")])),_:1}),u(j,{class:"btn_listing",onClick:e[7]||(e[7]=t=>async function(t){if(!z.value)return U.warning("please connect the wallet"),!1;if(!t.order_id)return U.warning("error data"),!1;if(Number(le.value)<=0)return U.warning("Please enter the buy amount");let e=S.service({text:"Buy transition....",lock:!0,background:"rgba(0,0,0,0.5)"}),{data:l}=await ee([t.order_id]);if(!(null==l?void 0:l.length))return U.error("error data"),e.close();if(te.value=l[0],Number(le.value)>Number(ae.value))return U.warning("The max buy amount is "+ae.value),e.close();let a=await Qt(z.value,te.value.order_id,le.value);if(200!==a.code)return U.error(a.msg),e.close();let i=N.$Contract.control.methods.buy(a.data.order_id,a.data.project_id,a.data.order_amt,a.data.buy_amt,a.data.price,a.data.seller,a.data.deadline,a.data.signature).encodeABI(),s=await N.$sendTransition(N.$Contract.control._address,i,a.data.price);s.status?(Yt.value=!1,le.value="",await N.$statusByHash(s.hash),await N.$Utils.sleep(1e4),Jt(),U.success("Purchase transaction initiated")):U.error(s.msg||"buy fail"),e.close()}(te.value))},{default:_((()=>[v("Buy")])),_:1})])])),default:_((()=>[c("div",zt,[c("div",null,[c("div",Tt,[c("div",Lt,[c("div",Vt,[c("span",null,g(te.value.tick),1),t.$Utils.getSrcById(te.value.project_id)?($(),o("img",{key:0,src:t.$Utils.getSrcById(te.value.project_id),style:{width:"20px",height:"20px"}},null,8,Ft)):($(),x(s,{key:1,style:{color:"#17d417"},name:"checked"}))]),c("div",Ht,[u(r,{type:"info"},{default:_((()=>[v(g(te.value.p),1)])),_:1}),u(r,{type:"info"},{default:_((()=>[v(g((te.value.op||"Mint").toLowerCase()),1)])),_:1})]),c("div",It,g(t.$Utils.orderDiv(te.value.order_amt,te.value.buy_lim)),1),Pt])]),c("div",Dt,[u(B,{maxlength:"12",modelValue:le.value,"onUpdate:modelValue":e[5]||(e[5]=t=>le.value=t),placeholder:"Enter the buy amount"},{suffix:_((()=>[c("span",{onClick:e[4]||(e[4]=k((t=>le.value=ae.value),["stop"])),style:{cursor:"pointer"}},"Max")])),_:1},8,["modelValue"])])]),c("div",Et,[Zt,c("div",Wt,g(t.$Utils.rpZero(t.$web3.utils.fromWei(""+te.value.price||"0")))+" BNB",1)]),c("div",At,[qt,c("div",Kt,g(ie(te.value.price))+"BNB",1)])])])),_:1},8,["modelValue"])]);var V}}},[["__scopeId","data-v-6fc5943f"]]);export{Rt as default};
